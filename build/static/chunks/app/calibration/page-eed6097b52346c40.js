(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8723],{40141:function(e,t,n){Promise.resolve().then(n.bind(n,47901))},81127:function(e,t,n){"use strict";n.d(t,{k:function(){return useGcodeCommand}});var l=n(39164),a=n(96886);let useGcodeCommand=()=>{let e=(0,a.xH)("printer.gcode.script");return(0,l.useCallback)(async function(t){for(var n=arguments.length,l=Array(n>1?n-1:0),a=1;a<n;a++)l[a-1]=arguments[a];let i=[t[0]];l.forEach((e,n)=>{i.push(e.toString(),t[n+1])});let r=i.join("");console.log(r);let s=await e.mutateAsync({script:r});console.log(s)},[])}},47901:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Page}});var l=n(72612),a=n(56445),i=n(39164),r=n(98948),s=n(63278),o=n(57137),c=n(64322),d=n(97060),u=n(65778),m=n(48789);let x={pixelPrMm:160,outerNozzleDiameter:1,flipVertical:!1,flipHorizontal:!1},VaocSettingsDialog=e=>{var t,n;let{settings:a,setSettings:r,isSettingsFetched:f}=e,h=(0,i.useRef)(!1),[p,v]=(0,i.useState)(f?a.pixelPrMm.toFixed(2):null),[b,g]=(0,i.useState)(f?a.outerNozzleDiameter.toFixed(2):null),j=(0,d.N)(r,200);return(0,i.useEffect)(()=>{if(f&&!1===h.current){var e,t;v(null!==(e=null==a?void 0:a.pixelPrMm.toFixed(2))&&void 0!==e?e:x.pixelPrMm.toFixed(2)),g(null!==(t=null==a?void 0:a.outerNozzleDiameter.toFixed(2))&&void 0!==t?t:x.outerNozzleDiameter.toFixed(2)),h.current=!0}},[a,f]),(0,l.jsxs)(m.l,{className:(0,s.m6)("absolute left-5 top-1/2 max-h-[50%] w-80 -translate-y-1/2 scale-100 overflow-y-auto rounded-md border-y border-r border-zinc-800 bg-zinc-100 p-5 shadow-lg transition-all dark:bg-zinc-900/70",e.isVisible?"translate-x-0 opacity-100":"pointer-events-none -translate-x-8 opacity-0",e.className),onWheel:e=>{e.stopPropagation()},children:[(0,l.jsxs)("h3",{className:"flex flex-1 items-center justify-between text-base font-medium leading-7 text-zinc-900 dark:text-zinc-100",children:[(0,l.jsx)("span",{children:"Camera Settings"}),(0,l.jsx)(u,{className:"h-5 w-5 cursor-pointer",onClick:()=>e.toggle(!e.isVisible)})]}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-4 border-t border-zinc-100 pt-4 dark:border-zinc-800",children:[(0,l.jsx)(o.o,{label:"Pixel per mm",type:"number",value:null!=p?p:"",placeholder:f?void 0:"Loading...",onChange:e=>{let t=parseFloat(e);v(e),isNaN(t)||j(e=>({...null!=e?e:{},pixelPrMm:t}))},error:isNaN(parseFloat(null!=p?p:""))?"Not a valid number":void 0}),(0,l.jsx)(o.o,{label:"Outer Nozzle Diameter",type:"number",step:.1,value:null!=b?b:"",placeholder:f?void 0:"Loading...",onChange:e=>{let t=parseFloat(e);g(e),isNaN(t)||j(e=>({...null!=e?e:{},outerNozzleDiameter:t}))},error:isNaN(parseFloat(null!=b?b:""))?"Not a valid number":void 0}),(0,l.jsx)(c.Z,{label:"Flip vertical",onChange:e=>r({...null!=a?a:x,flipVertical:null!=e&&e}),description:"Whether to flip the camera vertically",value:null!==(t=null==a?void 0:a.flipVertical)&&void 0!==t?t:x.flipVertical}),(0,l.jsx)(c.Z,{label:"Flip horizontal",onChange:e=>r({...null!=a?a:x,flipHorizontal:null!=e&&e}),description:"Whether to flip the camera horizontally",value:null!==(n=null==a?void 0:a.flipHorizontal)&&void 0!==n?n:x.flipHorizontal})]})]})};var f=n(96886),h=n(98130),p=n(45489),v=n(87784);let parseOptions=e=>{let t=e.matchAll(/- available option:\s(\w+)\s.+(\[-?\d+\.\.\d+\])/g),n=[];for(let e of t){let[t,l]=e[2].slice(1,-1).split("..").map(e=>parseInt(e,10)),a=n.find(t=>t.key===e[1]);a&&"max"in a&&a.max&&a.max<=l||n.push({key:e[1],min:t,max:["redbalance","bluebalance","greenbalance"].includes(e[1])?2e3:l})}let l=e.matchAll(/- available option:\s(\w+)\s.+(\[-?\d+\.\d+\.\.\d+\.\d+\])/g);for(let e of l){let[t,l]=e[2].slice(1,-1).split("..").map(e=>parseFloat(e)),a=n.find(t=>t.key===e[1]);a&&"max"in a&&a.max&&a.max<=l||n.push({key:e[1],float:!0,min:t,max:["redbalance","bluebalance","greenbalance"].includes(e[1])?2e3:l})}let a=e.matchAll(/- available option:\s(\w+)\s.+(\[false\.\.true\])/g);for(let e of a)n.push({key:e[1],toggle:!0});return n};var b=n(52540),g=n(81446),j=n(5037);let useWindowSize=()=>{let[e,t]=(0,i.useState)({width:window.innerWidth,height:window.innerHeight});return(0,i.useEffect)(()=>{let handleResize=()=>{requestAnimationFrame(()=>{t({width:window.innerWidth,height:window.innerHeight})})};return window.addEventListener("resize",handleResize),()=>window.removeEventListener("resize",handleResize)},[]),e};var w=n(66477),y=n(35519),k=n(81127),N=n(99699),C=n(34594);function _templateObject(){let e=(0,p._)(["_VAOC_MOVE X="," Y=",""]);return _templateObject=function(){return e},e}let getCameraUrl=()=>{let e=(0,g.X)();return null==e||""==e.trim()?"/webcam":"http://".concat(e,"/webcam")},useUIState=()=>{let[e,t]=(0,i.useState)(.1),n=useWindowSize(),l=(0,j.W)(null,(e,n)=>{null!=e&&t(e.getBoundingClientRect().width/e.getBoundingClientRect().height)}),a=(0,i.useRef)(null);(0,N.Z)(l,e=>{t(e.contentRect.width/e.contentRect.height)}),(0,i.useEffect)(()=>{if(null!=l.current){var e,n,a;t((null===(e=l.current)||void 0===e?void 0:e.getBoundingClientRect().width)/(null===(n=l.current)||void 0===n?void 0:n.getBoundingClientRect().height))}},[n,l]);let[r,s]=(0,i.useState)(!1),o=(0,i.useCallback)(async e=>{C.Z.isEnabled&&a.current&&(null!=e&&(e?await C.Z.request(a.current):await C.Z.exit(),s(e)),(C.Z.isFullscreen||!1===e)&&(await C.Z.exit(),s(!1)),C.Z.isFullscreen&&!0!==e||(await C.Z.request(a.current),s(!0)))},[a]);(0,i.useEffect)(()=>{if(C.Z.isEnabled){let onChange=()=>{s(C.Z.isFullscreen)};return C.Z.on("change",onChange),()=>{C.Z.off("change",onChange)}}},[]);let[c,d]=(0,i.useState)(!0),[u,m]=(0,i.useState)(!1),[x,f]=(0,v.Z)("VAOC_UI_STATE_ZOOM","1.00"),h=(0,i.useRef)(parseFloat(x));h.current=parseFloat(x);let p=parseFloat(x),b=(0,i.useCallback)(e=>{let t=e(h.current);h.current=t,f(t.toFixed(2))},[f]);return{containerAspectRatio:e,setContainerAspectRatio:t,canMove:c,setCanMove:d,rootRef:a,isLockingCoordinates:u,setIsLockingCoordinates:m,zoom:p,setZoom:b,containerRef:l,windowSize:n,isFullscreened:r,toggleFullscreen:o}},useSpatialMapping=e=>{let{videoRef:t,containerRef:n,zoom:l,windowSize:a,settings:r}=e,[s,o]=(0,i.useState)([0,0]),c=(0,i.useCallback)(e=>{var n,a;let i=null!==(a=null===(n=t.current)||void 0===n?void 0:n.videoWidth)&&void 0!==a?a:1,r=s[0];return e*l*(r>0&&i>0?r/i:1)},[t,s,l]),d=(0,i.useCallback)(e=>{var n,a;let i=null!==(a=null===(n=t.current)||void 0===n?void 0:n.videoWidth)&&void 0!==a?a:1,r=s[0];return e/l/(r>0&&i>0?r/i:1)},[s,t,l]),u=(0,i.useCallback)(e=>{var t;return c(e)*(null!==(t=null==r?void 0:r.pixelPrMm)&&void 0!==t?t:0)},[c,null==r?void 0:r.pixelPrMm,a]),m=(0,i.useCallback)(e=>{var t;return d(e)/(null!==(t=null==r?void 0:r.pixelPrMm)&&void 0!==t?t:0)},[d,null==r?void 0:r.pixelPrMm]);return(0,N.Z)(n,e=>{if(e.contentRect.width>0&&e.contentRect.height>0)o([e.contentRect.width,e.contentRect.height]);else{var t;let e=null===(t=n.current)||void 0===t?void 0:t.getBoundingClientRect();e&&o([null==e?void 0:e.width,null==e?void 0:e.height])}}),{toScreen:u,toMillimeters:m,containerSize:s}},useGestures=e=>{let{gestureRef:t,setZoom:n,isConnected:l,canMove:a,toScreen:r,toMillimeters:s,zoom:o}=e,[c,d]=(0,i.useState)(null),[u,m]=(0,i.useState)({x:!1,y:!1}),x=(0,k.k)();return(0,y.useGesture)({onDrag:e=>{if(e.dragging)d([e.offset[0],e.offset[1]]),m({x:e._movementBound[0],y:e._movementBound[1]});else{var t,n;let e=s(null!==(t=null==c?void 0:c[0])&&void 0!==t?t:0),l=-1*s(null!==(n=null==c?void 0:c[1])&&void 0!==n?n:0);x(_templateObject(),e,l),d(null),m({x:!1,y:!1})}},onPinch:e=>{n(t=>Math.max(Math.min(t*e.offset[0],10),1))},onWheel:e=>{0!=e.delta[1]&&!1!=e.wheeling&&!1!=e.intentional&&(e.delta[1]<0?n(e=>Math.max(.85*e,1)):n(e=>Math.min(1.15*e,10)))}},{target:t,enabled:l,drag:{enabled:a,from:()=>[0,0],bounds:{left:-r(1),right:r(1),top:-r(1),bottom:r(1)},rubberband:!0},wheel:{axis:"y",rubberband:!1},pinch:{scaleBounds:{min:1,max:10},pinchOnWheel:!1,rubberband:!0}}),{scaledDragOffset:{x:null==c?0:c[0]/o,y:null==c?0:c[1]/o},dragOffset:{x:null==c?0:c[0],y:null==c?0:c[1]},isDragging:null!=c,dragOutside:u}},useCrossHairState=e=>{var t,n,l;let{toScreen:a,settings:r,containerSize:s}=e,o=null!==(l=e.snapshotDuration)&&void 0!==l?l:200,c=(0,f.hS)("configfile"),d=(0,f.Q)(e=>({active:e["gcode_macro T0"].active}),"gcode_macro T0"),u=(0,f.Q)(e=>({active:e["gcode_macro T1"].active}),"gcode_macro T1"),m=(null==d?void 0:d.active)?0:(null==u?void 0:u.active)?1:0,[x]=(0,w.S)([e.isLockingCoordinates],o,!0),[h]=(0,w.I)([e.isLockingCoordinates],o-10,10,!0),p=null===(t=null===(n=c.data)||void 0===n?void 0:n.configfile.settings[0===m?"extruder":"extruder1"])||void 0===t?void 0:t.nozzle_diameter,v=(0,i.useMemo)(()=>a((null!=p?p:.4)/2),[p,a]),{outerNozzleDiameter:b}=r,g=e.isConnected&&null!=b&&null!=p,j=(0,i.useMemo)(()=>x?v:a(b?b/2:1),[a,x,v,b]),y=(0,i.useMemo)(()=>e.isConnected?j/s[0]*100:0,[e.isConnected,j,s]),k=(0,i.useMemo)(()=>e.isConnected?j/s[1]*100:0,[e.isConnected,j,s]),N=(0,i.useMemo)(()=>a(.01),[a]);return{canRender:g,nozzleRadius:isNaN(v)?0:v,outerNozzleRadius:isNaN(j)?0:j,outerNozzleRadiusPercentWidth:isNaN(y)?0:y,outerNozzleRadiusPercentHeight:isNaN(k)?0:k,crosshairStrokeWidth:isNaN(N)?0:N,delayedIsLockingCoordinates:h}},useVideoState=()=>{let[e,t]=(0,i.useState)(getCameraUrl());(0,i.useEffect)(()=>{e!==getCameraUrl()&&t(getCameraUrl())},[e]);let[n,l]=(0,i.useState)(null),[a,r]=(0,i.useState)(null),s=(0,i.useCallback)(e=>{e.framesPerSecond&&l(e.framesPerSecond),e.frameHeight&&e.frameWidth&&r(e.frameWidth/e.frameHeight)},[]);return{url:e,setUrl:t,fps:n,aspectRatio:a,onStreamStats:s}},useStreamSettings=e=>{let{url:t,isConnected:n,settings:l,saveSettings:a,isInitialLoading:s,isFetched:o}=e,[c,d]=(0,i.useState)([]),u=(0,i.useRef)(l);u.current=l;let m=(0,i.useMemo)(()=>c.map(e=>{var t,n,l;return e.value=null!==(l=null===(n=u.current)||void 0===n?void 0:null===(t=n[e.key])||void 0===t?void 0:t.value)&&void 0!==l?l:e.value,"max"in e&&"ExposureTime"===e.key&&(e.min=0,e.max=6e4),e}),[c]),x=(0,i.useCallback)(async e=>{let n=await fetch("".concat(t,"/option?compressionquality=").concat(e));d(parseOptions(await n.text()))},[t]),f=(0,i.useCallback)(async(e,n)=>{let l=c.find(t=>t.key===e);if(null==l)throw Error("Invalid option ".concat(e));if(l&&"toggle"in l&&"boolean"!=typeof n)throw Error("Expect a boolean value for ".concat(e,", got ").concat(n));if(l&&"max"in l&&("number"!=typeof n||l.min>n||l.max<n))throw Error("Value ".concat(n," is out of range for ").concat(e));try{let l="boolean"==typeof n?n?1:0:n,c=await fetch("".concat(t,"/option?").concat(e,"=").concat(l.toString()));if(c.ok&&!1===s){var i,o;(0,r.j)().info("saving",e,n,u.current,(0,b.T)(null!==(i=u.current)&&void 0!==i?i:{},{[e]:{value:n}})),await a((0,b.T)(null!==(o=u.current)&&void 0!==o?o:{},{[e]:{value:n}}))}return c.ok}catch(e){return!1}},[c,t,s,a]);return(0,i.useEffect)(()=>{if(n&&x(100),n&&o&&null!=u.current)for(let n in u.current){var e;let l=null===(e=u.current[n])||void 0===e?void 0:e.value,a="boolean"==typeof l?l?1:0:l;null!=a&&fetch("".concat(t,"/option?").concat(n,"=").concat(a.toString()))}},[o,t,n,x]),{options:m,setOption:f}};var z=n(51601),_=n(55282);let ExposureIcon=e=>(0,l.jsxs)("svg",{viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",className:e.className,children:[(0,l.jsx)("path",{fill:"currentColor",d:"M456,40H56A16,16,0,0,0,40,56V456a16,16,0,0,0,16,16H456a16,16,0,0,0,16-16V56A16,16,0,0,0,456,40ZM72,72H417.373L72,417.373ZM440,440H94.627L440,94.627Z"}),(0,l.jsx)("polygon",{fill:"currentColor",points:"336 368 336 408 368 408 368 368 408 368 408 336 368 336 368 296 336 296 336 336 296 336 296 368 336 368"}),(0,l.jsx)("rect",{width:"112",height:"32",x:"112",y:"136",fill:"currentColor"})]});var S=n(63623),O=n(18368),V=n(18119),Z=n(6508);function focus_controls_templateObject(){let e=(0,p._)(["G91\nG0 Z1"],["G91\\nG0 Z1"]);return focus_controls_templateObject=function(){return e},e}function _templateObject1(){let e=(0,p._)(["G91\nG0 Z0.5"],["G91\\nG0 Z0.5"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,p._)(["G91\nG0 Z0.1"],["G91\\nG0 Z0.1"]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,p._)(["G91\nG0 Z0.05"],["G91\\nG0 Z0.05"]);return _templateObject3=function(){return e},e}function _templateObject4(){let e=(0,p._)(["G91\nG0 Z0.01"],["G91\\nG0 Z0.01"]);return _templateObject4=function(){return e},e}function _templateObject5(){let e=(0,p._)(["G91\nG0 Z-0.01"],["G91\\nG0 Z-0.01"]);return _templateObject5=function(){return e},e}function _templateObject6(){let e=(0,p._)(["G91\nG0 Z-0.05"],["G91\\nG0 Z-0.05"]);return _templateObject6=function(){return e},e}function _templateObject7(){let e=(0,p._)(["G91\nG0 Z-0.1"],["G91\\nG0 Z-0.1"]);return _templateObject7=function(){return e},e}function _templateObject8(){let e=(0,p._)(["G91\nG0 Z-0.5"],["G91\\nG0 Z-0.5"]);return _templateObject8=function(){return e},e}function _templateObject9(){let e=(0,p._)(["G91\nG0 Z-1.0"],["G91\\nG0 Z-1.0"]);return _templateObject9=function(){return e},e}let FocusControls=e=>{var t,n,a;let i=(0,k.k)(),r=(0,f.Q)(e=>{var t;return{z:null===(t=e.motion_report.live_position)||void 0===t?void 0:t[2]}},"motion_report");return(0,l.jsx)("div",{className:(0,s.m6)("scroll absolute left-0 right-0 transform-gpu overflow-y-auto rounded-md border-y border-r border-zinc-800 bg-zinc-100 font-mono shadow-lg transition-all dark:bg-zinc-900/70",e.isVisible?" -translate-y-full opacity-100":"pointer-events-none  -translate-y-[95%]  opacity-0",e.className),onWheel:e=>{e.stopPropagation()},children:(0,l.jsxs)("ol",{className:"flex flex-col divide-y divide-zinc-200 dark:divide-zinc-800",children:[(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(focus_controls_templateObject()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsxs)("span",{className:"relative inline h-5 w-5 flex-shrink-0",children:[(0,l.jsx)(S.Z,{className:"absolute top-0.5 h-5 w-5","aria-hidden":"true"}),(0,l.jsx)(S.Z,{className:"absolute -top-1 h-5 w-5","aria-hidden":"true"})]}),(0,l.jsx)("span",{className:"inline",children:"+1.00"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject1()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsx)(S.Z,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,l.jsx)("span",{className:"inline",children:"+0.50"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject2()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsx)(O.Z,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,l.jsx)("span",{className:"inline",children:"+0.10"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject3()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsx)(O.Z,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,l.jsx)("span",{className:"inline",children:"+0.05"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject4()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsx)(O.Z,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,l.jsx)("span",{className:"inline",children:"+0.01"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("span",{className:(0,s.m6)("flex flex-1 cursor-default items-center justify-center space-x-2 whitespace-nowrap bg-brand-500 px-5 py-3 text-sm font-medium text-zinc-900"),children:[(0,l.jsx)("span",{className:"inline h-5 w-5 flex-shrink-0 font-sans text-base font-semibold leading-[18px]",children:"Z"})," ",(0,l.jsxs)("span",{className:"inline",children:[(null!==(n=null==r?void 0:r.z)&&void 0!==n?n:0)>=0&&"+",null!==(a=null==r?void 0:null===(t=r.z)||void 0===t?void 0:t.toFixed(2))&&void 0!==a?a:"??"]})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject5()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsx)(V.Z,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,l.jsx)("span",{className:"inline",children:"-0.01"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject6()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsx)(V.Z,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,l.jsx)("span",{className:"inline",children:"-0.05"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject7()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsx)(V.Z,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,l.jsx)("span",{className:"inline",children:"-0.10"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject8()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsx)(Z.Z,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,l.jsx)("span",{className:"inline",children:"-0.50"})]})})}),(0,l.jsx)("li",{className:(0,s.dV)("flex"),children:(0,l.jsx)("div",{className:(0,s.dV)("flex flex-1 items-center justify-center text-center"),children:(0,l.jsxs)("button",{onClick:()=>i(_templateObject9()),type:"button",className:(0,s.m6)("flex flex-1 items-center justify-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 hover:text-zinc-900 dark:text-zinc-300 dark:hover:text-zinc-100"),children:[(0,l.jsxs)("span",{className:"relative inline h-5 w-5 flex-shrink-0",children:[(0,l.jsx)(Z.Z,{className:"absolute bottom-0.5 h-5 w-5","aria-hidden":"true"}),(0,l.jsx)(Z.Z,{className:"absolute -bottom-1 h-5 w-5","aria-hidden":"true"})]}),(0,l.jsx)("span",{className:"inline",children:"-1.00"})]})})})]})})};var T=n(88116);let E={duration:150},Button=e=>{let[t]=(0,T.u)(),[n,a]=i.useState(!1),r=(0,d.N)(a,200),o=(0,i.useCallback)(async()=>{e.onClick&&!e.isLoading&&(r(!0),await e.onClick(),r(!1))},[r,e]);return(0,l.jsxs)("li",{className:(0,s.dV)("relative flex"),children:["before"===e.subButtonPosition&&(0,l.jsx)("ol",{ref:t,className:"flex divide-x divide-zinc-200 dark:divide-zinc-800",children:e.children}),(0,l.jsx)("div",{className:(0,s.dV)("flex items-center",e.isActive&&"dark:bg-zinc-800"),children:(0,l.jsxs)("button",{onClick:o,type:"button",title:e.title,className:(0,s.m6)("flex items-center space-x-2 whitespace-nowrap px-5 py-3 text-sm font-medium text-zinc-700 transition-transform hover:text-black active:scale-95 dark:text-zinc-300 dark:hover:text-white",e.isActive?"hover:text-brand:600 text-brand-600 dark:text-brand-500 dark:hover:text-brand-500":"",e.hidden?"hidden":"",e.className),children:[e.icon&&(e.isLoading||n)&&(0,l.jsx)(h.$,{noMargin:!0,className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),e.icon&&!e.isLoading&&(0,l.jsx)(e.icon,{className:"inline h-5 w-5 flex-shrink-0","aria-hidden":"true"}),e.name&&(0,l.jsx)("span",{className:"inline",children:e.name})]})}),null!=e.subButtonPosition&&"before"!==e.subButtonPosition&&(0,l.jsx)("ol",{ref:t,className:"flex divide-x divide-zinc-200 dark:divide-zinc-800",children:e.children}),null==e.subButtonPosition&&e.children&&e.children]},e.id)};function Toolbar(e){let[t]=(0,T.u)(E);return(0,l.jsx)("nav",{className:(0,s.m6)("flex select-none overflow-hidden rounded-md border border-zinc-200 bg-white shadow dark:border-zinc-800 dark:bg-zinc-900/80",e.className),"aria-label":"Breadcrumb",children:(0,l.jsx)("ol",{role:"list",className:"flex divide-x divide-zinc-200 dark:divide-zinc-800",ref:t,children:e.buttons.map(t=>{var n;let l=null===(n=e.subButtons)||void 0===n?void 0:n.filter(e=>e.parent===t.id);return t.hidden?null:(0,i.createElement)(Button,{...t,key:t.id},null!=l&&l.length>0&&t.isActive?l.map(e=>e.hidden?null:(0,i.createElement)(Button,{...e,key:e.id})):t.children)})})})}var R=n(8930);let Slider=e=>{let{onChange:t,min:n,max:a,initialValue:r,step:s,isBoolean:o}=e,[c,u]=(0,i.useState)(null!=r?r:n),m=(0,d.N)((0,i.useCallback)(e=>{null==t||t(e)},[t]),100),x=(0,i.useCallback)(e=>{let t=s?parseFloat(e.target.value):parseInt(e.target.value,10);u(t),m(t)},[m,s]);return(0,l.jsxs)("div",{className:"relative mb-6",children:[(0,l.jsx)("input",{type:"range",value:c,onChange:x,min:n,max:a,step:null!=s?s:1,className:"h-2 w-full cursor-pointer appearance-none rounded-lg bg-zinc-200 dark:bg-zinc-700"}),(0,l.jsx)("span",{className:"absolute -bottom-6 start-0 text-sm text-zinc-500 dark:text-zinc-400",children:o?"Off":"Min (".concat(n,")")}),!o&&(0,l.jsx)("span",{className:"absolute -bottom-6 start-1/3 -translate-x-1/2 text-sm text-zinc-500 dark:text-zinc-400 rtl:translate-x-1/2",children:(a/3).toFixed(2)}),!o&&(0,l.jsx)("span",{className:"absolute -bottom-6 start-2/3 -translate-x-1/2 text-sm text-zinc-500 dark:text-zinc-400 rtl:translate-x-1/2",children:(a/3*2).toFixed(2)}),(0,l.jsx)("span",{className:"absolute -bottom-6 end-0 text-sm text-zinc-500 dark:text-zinc-400",children:o?"On":"Max (".concat(a,")")})]})};var A=n(73790);let StreamSettingsDialog=e=>{let{url:t,isConnected:n,isAdvancedVisible:a,isColorVisible:i,isExposureVisible:r}=e,[o,c,d]=(0,f.Fu)("RatOS","camera-stream-settings"),{options:u,setOption:x}=useStreamSettings({url:t,isConnected:n,settings:o,saveSettings:c,isInitialLoading:d.isInitialLoading,isFetched:d.isFetched}),[h]=(0,T.u)();return(0,l.jsx)(m.l,{className:(0,s.dV)("absolute bottom-24 left-1/4 right-1/4 max-h-[50%] overflow-y-scroll overscroll-contain rounded-md bg-zinc-900/70",e.className),children:(0,l.jsxs)(A.E.div,{ref:h,children:[r&&u.filter(e=>e.key.toLowerCase().includes("gain")||e.key.toLowerCase().includes("exposure")||e.key.startsWith("Ae")||e.key.toLowerCase().includes("brightness")).filter(e=>"ColourGains"!==e.key).map(e=>(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("label",{className:"block text-center text-base font-semibold capitalize text-zinc-200",children:e.key}),(0,l.jsx)(Slider,{isBoolean:"toggle"in e,min:"toggle"in e?0:"min"in e?e.min:0,initialValue:!0===e.value?1:!1===e.value?0:e.value,max:"toggle"in e?1:"max"in e?e.max:0,step:"float"in e&&e.float?"any":1,onChange:t=>x(e.key,"toggle"in e?!!t:t)})]},e.key)),i&&u.filter(e=>e.key.toLowerCase().includes("saturation")||e.key.toLowerCase().includes("contrast")||e.key.startsWith("Awb")).map(e=>(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("label",{className:"block text-center text-base font-semibold capitalize text-zinc-200",children:e.key}),(0,l.jsx)(Slider,{isBoolean:"toggle"in e,min:"toggle"in e?0:"min"in e?e.min:0,initialValue:!0===e.value?1:!1===e.value?0:e.value,max:"toggle"in e?1:"max"in e?e.max:0,step:"float"in e&&e.float?"any":1,onChange:t=>x(e.key,"toggle"in e?!!t:t)})]},e.key)),a&&u.map(e=>(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("label",{className:"block text-center text-base font-semibold capitalize text-zinc-200",children:e.key}),(0,l.jsx)(Slider,{isBoolean:"toggle"in e,min:"toggle"in e?0:"min"in e?e.min:0,initialValue:!0===e.value?1:!1===e.value?0:e.value,max:"toggle"in e?1:"max"in e?e.max:0,step:"float"in e&&e.float?"any":1,onChange:t=>x(e.key,"toggle"in e?!!t:t)})]},e.key))]})})},EnterFullscreenIcon=e=>(0,l.jsx)("svg",{...e,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M2 2.5C2 2.22386 2.22386 2 2.5 2H5.5C5.77614 2 6 2.22386 6 2.5C6 2.77614 5.77614 3 5.5 3H3V5.5C3 5.77614 2.77614 6 2.5 6C2.22386 6 2 5.77614 2 5.5V2.5ZM9 2.5C9 2.22386 9.22386 2 9.5 2H12.5C12.7761 2 13 2.22386 13 2.5V5.5C13 5.77614 12.7761 6 12.5 6C12.2239 6 12 5.77614 12 5.5V3H9.5C9.22386 3 9 2.77614 9 2.5ZM2.5 9C2.77614 9 3 9.22386 3 9.5V12H5.5C5.77614 12 6 12.2239 6 12.5C6 12.7761 5.77614 13 5.5 13H2.5C2.22386 13 2 12.7761 2 12.5V9.5C2 9.22386 2.22386 9 2.5 9ZM12.5 9C12.7761 9 13 9.22386 13 9.5V12.5C13 12.7761 12.7761 13 12.5 13H9.5C9.22386 13 9 12.7761 9 12.5C9 12.2239 9.22386 12 9.5 12H12V9.5C12 9.22386 12.2239 9 12.5 9Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),ExitFullscreenIcon=e=>(0,l.jsx)("svg",{...e,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M5.5 2C5.77614 2 6 2.22386 6 2.5V5.5C6 5.77614 5.77614 6 5.5 6H2.5C2.22386 6 2 5.77614 2 5.5C2 5.22386 2.22386 5 2.5 5H5V2.5C5 2.22386 5.22386 2 5.5 2ZM9.5 2C9.77614 2 10 2.22386 10 2.5V5H12.5C12.7761 5 13 5.22386 13 5.5C13 5.77614 12.7761 6 12.5 6H9.5C9.22386 6 9 5.77614 9 5.5V2.5C9 2.22386 9.22386 2 9.5 2ZM2 9.5C2 9.22386 2.22386 9 2.5 9H5.5C5.77614 9 6 9.22386 6 9.5V12.5C6 12.7761 5.77614 13 5.5 13C5.22386 13 5 12.7761 5 12.5V10H2.5C2.22386 10 2 9.77614 2 9.5ZM9 9.5C9 9.22386 9.22386 9 9.5 9H12.5C12.7761 9 13 9.22386 13 9.5C13 9.77614 12.7761 10 12.5 10H10V12.5C10 12.7761 9.77614 13 9.5 13C9.22386 13 9 12.7761 9 12.5V9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var F=n(86962),M=n(21734),L=n(64546),D=n(39492),P=n(5777),G=n(68430),H=n(93596),B=n(27279),I=n(87421),W=n(76543),X=n(94787),U=n(10573),Q=n(77579);function toolbars_templateObject(){let e=(0,p._)(["_VAOC_SET_TOOL"]);return toolbars_templateObject=function(){return e},e}function toolbars_templateObject1(){let e=(0,p._)(["_VAOC_END"]);return toolbars_templateObject1=function(){return e},e}function toolbars_templateObject2(){let e=(0,p._)(["_VAOC_START"]);return toolbars_templateObject2=function(){return e},e}function toolbars_templateObject3(){let e=(0,p._)(["_VAOC_SET_TOOL"]);return toolbars_templateObject3=function(){return e},e}function toolbars_templateObject4(){let e=(0,p._)(["_VAOC_LOAD_TOOL T=0"]);return toolbars_templateObject4=function(){return e},e}function toolbars_templateObject5(){let e=(0,p._)(["_VAOC_SET_TOOL"]);return toolbars_templateObject5=function(){return e},e}function toolbars_templateObject6(){let e=(0,p._)(["_VAOC_LOAD_TOOL T=1"]);return toolbars_templateObject6=function(){return e},e}function toolbars_templateObject7(){let e=(0,p._)(["_VAOC_SWITCH_LED STATE=",""]);return toolbars_templateObject7=function(){return e},e}function toolbars_templateObject8(){let e=(0,p._)(["_VAOC_CALIBRATE_Z_OFFSET"]);return toolbars_templateObject8=function(){return e},e}function toolbars_templateObject9(){let e=(0,p._)(["_VAOC_CALIBRATE_TEMP_OFFSET"]);return toolbars_templateObject9=function(){return e},e}let useToolbarState=e=>{var t,n;let[l,a]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[m,x]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),[g,j]=(0,i.useState)(!1),[y,k]=(0,i.useState)(!1),[N,C]=(0,w.S)([e.zoom],2e3,!0),z=(0,i.useCallback)(()=>{j(e=>!e),C()},[C]),_=(0,f.Q)(e=>{var t,n,l;return{x:null===(t=e.motion_report.live_position)||void 0===t?void 0:t[0],y:null===(n=e.motion_report.live_position)||void 0===n?void 0:n[1],z:null===(l=e.motion_report.live_position)||void 0===l?void 0:l[2]}},"motion_report"),S=(0,f.Q)(e=>({active:e["gcode_macro T0"].active}),"gcode_macro T0"),O=(0,f.Q)(e=>({active:e["gcode_macro T1"].active}),"gcode_macro T1"),{isVaocStarted:V}=null!==(t=(0,f.Q)(e=>({isVaocStarted:e["gcode_macro _VAOC"].is_started}),"gcode_macro _VAOC"))&&void 0!==t?t:{isVaocStarted:!1},{hasZOffsetProbe:Z}=null!==(n=(0,f.Q)(e=>({hasZOffsetProbe:null!=e.configfile.settings.z_offset_probe}),"configfile"))&&void 0!==n?n:{hasZOffsetProbe:!1};return{live_position:_,tool:(null==S?void 0:S.active)?"T0":(null==O?void 0:O.active)?"T1":null,isStartingVaoc:l,setIsStartingVaoc:a,isSettingsVisible:r,setIsSettingsVisible:s,isExposureVisible:o,setIsExposureVisible:c,isColorVisible:d,setIsColorVisible:u,isFocusVisible:m,setIsFocusVisible:x,isAdvancedVisible:h,setIsAdvancedVisible:p,light:v,setLight:b,isVaocStarted:V,isZoomExpanded:N||g,toggleIsZoomExpanded:z,hasZOffsetProbe:Z,isZOffsetProbeVisible:Z&&V,isCameraControlsVisible:y,setIsCameraControlsVisible:k}},Toolbars=e=>{let{canMove:t,isLockingCoordinates:n,setIsLockingCoordinates:a,zoom:r,setZoom:s,fps:o,url:c,isConnected:d,setSettings:u,settings:m,isSettingsFetched:x,isFullscreened:f}=e,{live_position:h,tool:p,isStartingVaoc:v,setIsStartingVaoc:b,isSettingsVisible:g,setIsSettingsVisible:j,isExposureVisible:y,setIsExposureVisible:N,isColorVisible:C,setIsColorVisible:S,isFocusVisible:O,setIsFocusVisible:V,isAdvancedVisible:Z,setIsAdvancedVisible:T,light:E,setLight:A,isVaocStarted:q,isZoomExpanded:$,toggleIsZoomExpanded:Y,isZOffsetProbeVisible:J,isCameraControlsVisible:K,setIsCameraControlsVisible:ee}=useToolbarState({zoom:r}),et=(0,k.k)(),en=(0,i.useCallback)(async(e,t)=>{var n,l,a,i;try{let l=await e();return(null==t?void 0:t.success)&&await (null==t?void 0:null===(n=t.success)||void 0===n?void 0:n.call(t)),l}catch(n){let e=null!==(l=null==t?void 0:t.fallbackDescription)&&void 0!==l?l:"Unknown error occured. Please try again.";n instanceof Error&&(e=n.message),X.A.error(null!==(a=null==t?void 0:t.title)&&void 0!==a?a:"Couldn't execute VAOC command",{description:'\n				<div>\n					<pre class="text-wrap mt-4 text-rose-400 font-medium whitespace-pre-wrap">'.concat(e,"</pre>\n				</div>\n				")}),(null==t?void 0:t.error)&&await (null==t?void 0:null===(i=t.error)||void 0===i?void 0:i.call(t))}finally{(null==t?void 0:t.always)&&await (null==t?void 0:t.always())}},[]),[el]=(0,w.S)([n],200,!0),[ea,ei]=(0,i.useState)(!1),[er,es]=(0,i.useState)(!1),eo=[{icon:q?F.Z:M.Z,id:"start/stop",name:q?void 0:"Start Calibration",title:q?"Stop calibration":"Start calibration",onClick:async()=>{if(!v){if(q&&f){var t;null===(t=e.toggleFullscreen)||void 0===t||t.call(e,!1)}b(!0),q&&(a(!0),await en(()=>et(toolbars_templateObject()),{always:async()=>{a(!1)}})),en(()=>q?et(toolbars_templateObject1()):et(toolbars_templateObject2()),{always:async()=>{b(!1)},title:"Couldn't ".concat(q?"stop":"start"," VAOC"),fallbackDescription:"Unknown error occured while ".concat(q?"stopping":"starting"," VAOC. Please try again.")})}},isActive:q},{name:"T0",id:"t0",hidden:!q,title:"Switch to tool 0 (T0)",onClick:async()=>{a(!0),await en(()=>et(toolbars_templateObject3()),{always:async()=>{a(!1)}}),await en(()=>et(toolbars_templateObject4()))},isActive:"T0"===p},{name:"T1",id:"t1",hidden:!q,title:"Switch to tool 1 (T1)",onClick:async()=>{a(!0),await en(()=>et(toolbars_templateObject5()),{always:async()=>{a(!1)}}),await en(()=>et(toolbars_templateObject6()))},isActive:"T1"===p}],ec=[{icon:L.Z,id:"zoom",title:"".concat($?"Hide":"Show"," zoom controls"),subButtonPosition:"before",className:"font-mono",name:r>=10?"MAX!":(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.ZP,{preserveValue:!0,start:0,end:Math.round(100*r),duration:.15}),"%"]}),onClick:()=>{Y()},isActive:$},{icon:E?D.Z:P.Z,id:"light",title:"".concat(E?"Turn off":"Turn on"," the LEDs"),onClick:async()=>{let e=!E;await en(()=>et(toolbars_templateObject7(),e?1:0),{success:async()=>{A(e)}})},isActive:E},{icon:f?ExitFullscreenIcon:EnterFullscreenIcon,id:"fullscreen",title:"".concat(f?"Exit":"Enter"," fullscreen mode"),onClick:()=>{e.toggleFullscreen&&e.toggleFullscreen()},isActive:f}],ed=(0,i.useMemo)(()=>[{name:"Settings",icon:G.Z,id:"settings",title:"Show camera settings dialog",onClick:()=>{j(e=>!e)},isActive:g},{name:"Calibrate Thermal Expansion",icon:H.Z,hidden:!q,isLoading:er||ea,id:"calibrate-thermal-expansion",title:"Calibrates the thermal expansion coefficient for both toolheads",onClick:async()=>{es(!0)},isActive:t},{name:"Calibrate Z-offsets",icon:B.Z,title:"Probe the z endstop to set the Z offset for both hotends",id:"z-probe",hidden:!J,onClick:async()=>{await en(()=>et(toolbars_templateObject8()))},isActive:!1}],[g,q,er,ea,t,J,j,en,et]),eu=(0,i.useMemo)(()=>{let e=[{icon:I.Z,name:(0,l.jsx)("span",{children:null==o?"Loading...":(0,l.jsxs)("span",{children:[(0,l.jsx)(R.ZP,{start:0,preserveValue:!0,duration:1,end:o})," FPS"]})}),className:"font-mono",id:"settings",subButtonPosition:"before",title:"".concat(K?"Hide":"Show"," camera controls"),onClick:()=>{K?(V(!1),N(!1),S(!1),T(!1)):V(!1),ee(e=>!e)},isActive:K},{icon:W.Z,id:"focus",hidden:!1,name:"Z Focus",title:"".concat(O?"Hide":"Show"," focus controls"),children:(0,l.jsx)(FocusControls,{isVisible:O,toggle:V}),onClick:()=>{V(e=>!e),ee(!1),N(!1),S(!1),T(!1)},isActive:O}];return e},[o,K,O,T,ee,S,N,V]),em=(0,i.useMemo)(()=>{let e=[{icon:ExposureIcon,id:"exposure",parent:"settings",hidden:C||Z||O,title:"".concat(y?"Hide":"Show"," exposure controls"),name:"Exposure",onClick:()=>{N(e=>!e),S(!1),T(!1),V(!1)},isActive:y},{icon:z,id:"color",parent:"settings",title:"".concat(C?"Hide":"Show"," color controls"),hidden:y||Z||O,name:"Color",onClick:()=>{S(e=>!e),N(!1),T(!1),V(!1)},isActive:C},{icon:_,id:"advanced-camera-controls",parent:"settings",title:"".concat(Z?"Hide":"Show"," advanced camera controls"),name:"Advanced",hidden:y||C||O,onClick:()=>{T(e=>!e),N(!1),S(!1),V(!1)},isActive:Z}];return e.reverse()},[C,Z,y,O,V,N,S,T]),ex=er?(0,l.jsx)(U.u,{title:"Make sure nozzles are clean",body:"Clean nozzles and empty meltzones are important for accuracy",content:(0,l.jsx)(Q.j,{title:"Important for accuracy",children:"Before proceeding, make sure that the nozzle is clean on both toolheads and that no filament is left in the meltzone. Oozing filament or dirty nozzles will cause inaccurate results."}),buttonLabel:"They're clean, i promise!",dismissText:"Abort",onClick:async()=>{ei(!0),await en(()=>et(toolbars_templateObject9()),{title:"Failed thermal expansion calibration",fallbackDescription:"Unknown error occured while calibrating thermal expansion. Please try again.",always:async()=>{ei(!1)}})},onClose:()=>{setTimeout(()=>es(!1),200)}}):null;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Toolbar,{className:"pointer-events-auto absolute left-5 top-5",buttons:eo}),(0,l.jsx)(Toolbar,{className:"pointer-events-auto absolute bottom-5 right-5 overflow-visible",buttons:eu,subButtons:em}),(0,l.jsx)(Toolbar,{className:"pointer-events-auto absolute right-5 top-5",buttons:ec,subButtons:[{name:"1X",id:"1x",parent:"zoom",title:"Set zoom to 1X (100%)",className:"font-mono",onClick:()=>{s(()=>1)},isActive:!1},{name:"2X",id:"2x",parent:"zoom",title:"Set zoom to 2X (200%)",className:"font-mono",onClick:()=>{s(()=>2)},isActive:!1},{name:"4X",id:"4x",parent:"zoom",title:"Set zoom to 4X (400%)",className:"font-mono",onClick:()=>{s(()=>4)},isActive:!1}]}),(0,l.jsx)(Toolbar,{className:"pointer-events-auto absolute bottom-5 left-5",buttons:ed}),(0,l.jsx)(VaocSettingsDialog,{className:"pointer-events-auto",isVisible:g,toggle:j,settings:m,isSettingsFetched:x,setSettings:u}),(0,l.jsx)(StreamSettingsDialog,{className:"pointer-events-auto",url:c,isConnected:d,isExposureVisible:y,isColorVisible:C,isAdvancedVisible:Z}),ex]})},SafetyVisualization=e=>{let{gestureState:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:(0,s.dV)("absolute inset-0",t.dragOutside.x&&t.dragOutside.x>0?"left-0 right-2/3 bg-gradient-to-r from-red-500/70 to-red-500/0":"left-2/3 right-0 bg-gradient-to-l from-red-500/70 to-red-500/0"),style:{opacity:t.dragOutside.x?Math.abs(t.dragOutside.x-t.dragOffset.x)/200:0,transform:"translateX(".concat(t.scaledDragOffset.x,"px) translateY(").concat(t.scaledDragOffset.y,"px)")}}),(0,l.jsx)("div",{className:(0,s.dV)("absolute inset-0",t.dragOutside.y&&t.dragOutside.y>0?"bottom-2/3 top-0 bg-gradient-to-b from-red-500/70 to-red-500/0":"bottom-0 top-2/3 bg-gradient-to-t from-red-500/70 to-red-500/0"),style:{opacity:t.dragOutside.y?Math.abs(t.dragOutside.y-t.dragOffset.y)/200:0,transform:"translateX(".concat(t.scaledDragOffset.x,"px) translateY(").concat(t.scaledDragOffset.y,"px)")}})]})},FillViewport=e=>(0,l.jsx)("div",{className:(0,s.dV)("pointer-events-none absolute inset-0 flex items-center justify-center",e.className),children:e.children}),FillVideoFrame=e=>(0,l.jsx)("div",{className:(0,s.dV)("pointer-events-none absolute inset-0 top-1/2 -translate-y-1/2 transition-all",e.className),style:e.videoAspectRatio?{aspectRatio:Math.max(e.videoAspectRatio/e.zoom,e.containerAspectRatio)}:{},children:e.children}),CrossHair=e=>{let{canRender:t,outerNozzleRadius:n,nozzleRadius:a,outerNozzleRadiusPercentWidth:i,outerNozzleRadiusPercentHeight:r,crosshairStrokeWidth:o,delayedIsLockingCoordinates:c}=useCrossHairState(e);return(0,l.jsx)(FillViewport,{children:(0,l.jsxs)("svg",{width:"100%",height:"100%",children:[(0,l.jsxs)("g",{className:(0,s.dV)(e.isConnected&&n>0?"opacity-100":"opacity-0"),children:[(0,l.jsx)("rect",{x:"50%",y:t?"".concat(50-r,"%"):"50%",height:t?"".concat(2*r,"%"):0,width:t?o:0,shapeRendering:"geometricPrecision",className:"fill-brand-500 transition-all ease-in-out",style:{transform:"translateX(-".concat(o/2,")")}}),(0,l.jsx)("rect",{x:t?"".concat(50-i,"%"):"50%",y:"50%",width:t?"".concat(2*i,"%"):0,height:t?o:0,shapeRendering:"geometricPrecision",className:"fill-brand-500 transition-all ease-in-out",style:{transform:"translateY(-".concat(o/2,")")}})]}),(0,l.jsx)("circle",{cx:"50%",cy:"50%",r:t?c?n:1.5*n:0,fill:"none",className:(0,s.dV)("ease-out",c?"fill-brand-300":"fill-brand-300/0 transition-all duration-700"),shapeRendering:"geometricPrecision",strokeWidth:0}),(0,l.jsx)("circle",{cx:"50%",cy:"50%",r:t?a:0,fill:"none",className:(0,s.dV)("stroke-brand-500 transition-all ease-in-out",e.isConnected&&n>0?"opacity-100":"opacity-0"),shapeRendering:"geometricPrecision",strokeWidth:o}),(0,l.jsx)("circle",{cx:"50%",cy:"50%",r:t?n:0,fill:"none",className:(0,s.dV)("stroke-brand-500 transition-all ease-in-out",e.isConnected&&n>0?"opacity-100":"opacity-0"),shapeRendering:"geometricPrecision",strokeWidth:o})]})})},VAOC=()=>{var e,t,n;let a=useVideoState(),{videoRef:o,connectionState:c}=function(e,t){let n=(0,i.useRef)(null),l=(0,i.useRef)(null),a=(0,i.useRef)(null),s=(0,i.useRef)(e),o=(0,i.useRef)(!1),[c,d]=(0,i.useState)(null),u=(0,i.useRef)(null),m=(0,i.useCallback)(e=>{if(e.candidate)return fetch(s.current,{body:JSON.stringify({type:"remote_candidate",id:u.current,candidates:[e.candidate]}),headers:{"Content-Type":"application/json"},method:"POST"}).catch(function(e){window.console.error(e)})},[]),x=(0,i.useCallback)(async()=>{a.current&&(a.current.close(),a.current=null),o.current=!0;try{d("new");var t={sdpSemantics:"unified-plan"};document.getElementById("use-stun")&&document.getElementById("use-stun").checked&&(t.iceServers=[{urls:["stun:stun.l.google.com:19302"]}]);let r=new URLSearchParams(e),s=Object.fromEntries(r.entries()),o=await fetch(e,{body:JSON.stringify({type:"request",res:s.res}),headers:{"Content-Type":"application/json"},method:"POST"});if(o.ok){let r=await o.json();r.iceServers&&(t.iceServers=r.iceServers),a.current=new RTCPeerConnection(t),a.current.addTransceiver("video",{direction:"recvonly"}),a.current.addEventListener("track",function(e){if("video"==e.track.kind){if(n.current)n.current.srcObject=e.streams[0];else throw Error("No video ref to set src on")}else l.current&&(l.current.srcObject=e.streams[0])}),a.current.addEventListener("connectionstatechange",()=>{var e;let t=null===(e=a.current)||void 0===e?void 0:e.connectionState;d(null!=t?t:null)}),u.current=r.id,await a.current.setRemoteDescription(r);let s=await a.current.createAnswer();await a.current.setLocalDescription(s),await new Promise(function(e){if(null==a.current)throw Error("peerConnection.current is null");"complete"===a.current.iceGatheringState?e(null):a.current.addEventListener("icegatheringstatechange",function checkState(){if(null==a.current)throw Error("peerConnection.current is null");"complete"===a.current.iceGatheringState&&(a.current.removeEventListener("icegatheringstatechange",checkState),e(null))})}),a.current.addEventListener("icecandidate",m);var i=a.current.localDescription;if(null==i)throw Error("No offer from peerConnection");await fetch(e,{body:JSON.stringify({type:i.type,id:u.current,sdp:i.sdp}),headers:{"Content-Type":"application/json"},method:"POST"})}else d("failed")}catch(e){(0,r.j)().error(e,"Couldn't connect to WebRTC"),d("failed")}finally{o.current=!1}},[m,e]);return(0,i.useEffect)(()=>{if(t){let e=setInterval(async()=>{if(a.current){let e=await a.current.getStats();e.forEach(e=>{"inbound-rtp"===e.type&&"video"===e.kind&&(null==t||t(e))})}},1e3);return()=>clearInterval(e)}},[t]),(0,i.useEffect)(()=>{e&&!1===o.current?x():a.current&&!1===o.current&&a.current.close()},[x,e]),(0,i.useEffect)(()=>{if(["failed","disconnected"].includes(null!=c?c:"")){let e=setTimeout(()=>{x()},5e3);return()=>clearTimeout(e)}},[x,c]),{videoRef:n,audioRef:l,connectionState:c,close:(0,i.useCallback)(()=>{var e;null===(e=a.current)||void 0===e||e.close()},[])}}(a.url+"/webrtc",a.onStreamStats),d="connected"===c,[u,m,p]=(0,f.Fu)("RatOS","camera-settings",x),v=useUIState(),b=useSpatialMapping({settings:u,containerRef:v.containerRef,videoRef:o,windowSize:v.windowSize,zoom:v.zoom}),g=useGestures({setZoom:v.setZoom,canMove:v.canMove,gestureRef:o,isConnected:d,toMillimeters:b.toMillimeters,toScreen:b.toScreen,zoom:v.zoom}),j=v.zoom*((null==u?void 0:u.flipHorizontal)?-1:1),w=v.zoom*((null==u?void 0:u.flipVertical)?-1:1),y=g.scaledDragOffset.x*((null==u?void 0:u.flipHorizontal)?-1:1),k=g.scaledDragOffset.y*((null==u?void 0:u.flipVertical)?-1:1);return(0,l.jsx)("div",{className:(0,s.dV)(v.isFullscreened?"h-full":"h-[calc(100vh_-_64px)]","flex w-full select-none items-center"),ref:v.rootRef,children:(0,l.jsxs)("div",{className:"relative mx-auto flex h-full max-h-full min-h-[50vh] min-w-[50vw] max-w-fit items-center overflow-hidden object-contain shadow-lg",ref:v.containerRef,children:[(0,l.jsx)("video",{ref:o,className:(0,s.m6)("h-full max-h-full w-full min-w-full max-w-full transform-gpu touch-none",v.canMove&&"cursor-move",!g.isDragging&&"transition-transform ease-in-out"),style:{transform:"scale3d(".concat(j,", ").concat(w,", 1) translate3d(").concat(y,"px, ").concat(k,"px, 0)")},autoPlay:!0,muted:!0,playsInline:!0}),(0,l.jsx)(FillVideoFrame,{videoAspectRatio:null!==(e=a.aspectRatio)&&void 0!==e?e:0,containerAspectRatio:v.containerAspectRatio,zoom:v.zoom,children:(0,l.jsx)(SafetyVisualization,{gestureState:g})}),(0,l.jsx)(CrossHair,{isConnected:d&&null!=a.aspectRatio,isLockingCoordinates:v.isLockingCoordinates,settings:u,toScreen:b.toScreen,containerSize:b.containerSize}),(0,l.jsxs)(FillViewport,{children:[(0,l.jsx)("h3",{className:(0,s.m6)("absolute inset-0 flex items-center justify-center text-xl font-semibold text-rose-500 transition-all dark:text-rose-500","failed"===c?"animate-pulse opacity-100":"opacity-0"),children:(0,l.jsx)("div",{className:"flex aspect-square h-[30svh] w-[30svh] items-center justify-center",children:"Webcam stream not found"})}),(0,l.jsx)(h.$,{noMargin:!0,strokeWidth:1,className:(0,s.m6)("h-[40svh] w-[40svh] animate-spin text-inherit transition-all","text-lime-500 dark:text-lime-500",("connected"===c||"failed"===c)&&null!=a.aspectRatio&&"opacity-0","failed"===c&&"text-rose-500 dark:text-rose-500","connecting"===c&&"text-brand-500 dark:text-brand-500","closed"===c&&"text-yellow-500 dark:text-yellow-500","disconnected"===c&&"text-amber-500 dark:text-amber-500","new"===c&&"text-sky-500 dark:text-sky-500")})]}),(0,l.jsx)(FillVideoFrame,{videoAspectRatio:null!==(t=a.aspectRatio)&&void 0!==t?t:0,containerAspectRatio:v.containerAspectRatio,zoom:v.zoom,className:(0,s.dV)(null!=a.aspectRatio?"opacity-100":"opacity-0"),children:(0,l.jsx)(Toolbars,{zoom:v.zoom,toggleFullscreen:C.Z.isEnabled?v.toggleFullscreen:null,isFullscreened:v.isFullscreened,setZoom:v.setZoom,setIsLockingCoordinates:v.setIsLockingCoordinates,setCanMove:v.setCanMove,canMove:v.canMove,fps:null!==(n=a.fps)&&void 0!==n?n:0,isConnected:d,isLockingCoordinates:v.isLockingCoordinates,url:a.url,setSettings:m,settings:u,isSettingsFetched:p.isFetched})})]})})};function Page(){let e=(0,l.jsx)("div",{className:"absolute inset-0 flex h-[calc(100vh_-_64px)] items-center justify-center",children:(0,l.jsx)(h.$,{className:"h-[40svh] w-[40svh] animate-spin transition-all dark:text-lime-400",noMargin:!0,strokeWidth:1})});return(0,l.jsx)("div",{className:"flex h-full w-full items-center @container",children:(0,l.jsx)(i.Suspense,{fallback:e,children:(0,l.jsx)(a.NoSSR,{fallback:e,children:(0,l.jsx)(VAOC,{})})})})}},8832:function(e,t,n){"use strict";n.d(t,{I:function(){return FullLoadScreen}});var l=n(72612),a=n(98130),i=n(63278);let FullLoadScreen=e=>(0,l.jsx)("div",{className:(0,i.dV)("flex h-full w-full flex-1 items-center justify-center",e.className),children:(0,l.jsx)(a.$,{className:"h-8 w-8"})})},10573:function(e,t,n){"use strict";n.d(t,{u:function(){return Modal}});var l=n(72612),a=n(39164),i=n(93095),r=n(66751),s=n(47258),o=n(64929);let Drawer=e=>{let{shouldScaleBackground:t=!0,...n}=e;return(0,l.jsx)(s.d.Root,{shouldScaleBackground:t,...n})};Drawer.displayName="Drawer";let c=s.d.Trigger,d=s.d.Portal,u=s.d.Close,m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,l.jsx)(s.d.Overlay,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80",n),...a})});(0,o.h)(m,s.d.Overlay.displayName);let x=a.forwardRef((e,t)=>{let{className:n,children:a,...i}=e;return(0,l.jsxs)(d,{children:[(0,l.jsx)(m,{}),(0,l.jsxs)(s.d.Content,{ref:t,className:(0,o.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background outline-none focus:outline-none focus:ring-0 focus:ring-offset-0",n),...i,children:[(0,l.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),a]})]})});(0,o.h)(x,"DrawerContent");let DrawerHeader=e=>{let{className:t,...n}=e;return(0,l.jsx)("div",{className:(0,o.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...n})};DrawerHeader.displayName="DrawerHeader";let DrawerFooter=e=>{let{className:t,...n}=e;return(0,l.jsx)("div",{className:(0,o.cn)("mt-auto flex flex-col gap-2 p-4",t),...n})};DrawerFooter.displayName="DrawerFooter";let f=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,l.jsx)(s.d.Title,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",n),...a})});(0,o.h)(f,s.d.Title.displayName);let h=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,l.jsx)(s.d.Description,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",n),...a})});(0,o.h)(h,s.d.Description.displayName);var p=n(98130),v=n(95106),b=n(96455),g=n(63278),j=n(94787),w=n(34709);let ModalButton=e=>{let[t,n]=(0,a.useState)(!1),{hide:i}=e,{onClick:r,children:s}=e.button.props,o=(0,a.useCallback)(async()=>{let e=null==r?void 0:r();if(e instanceof Promise){n(1);try{await e,i()}catch(e){throw e instanceof Error&&j.A.error(e.message),e}finally{n(!1)}}else i()},[r,i]);return a.cloneElement(e.button,{onClick:o,style:{direction:"ltr"},children:(0,l.jsxs)(l.Fragment,{children:[s,1===t&&(0,l.jsx)(p.$,{className:"inline-block",noMargin:!0})]})})};function Modal(e){var t,n,s,o,d,m,j;let{onClick:y,onClose:k,onClosed:N,onClickSecondButton:C}=e,[z,_]=(0,a.useState)(null==e.children),S=(0,a.useCallback)(()=>{null==k||k(),_(!1),N&&setTimeout(()=>{N()},250)},[N,k]),O=(0,a.useCallback)(()=>{_(!0)},[]),V=e.isLoading?(0,l.jsx)("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-700",children:(0,l.jsx)(p.$,{className:"h-6 w-6",noMargin:!0,"aria-hidden":"true"})}):!0===e.success?(0,l.jsx)("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-lime-100 dark:bg-lime-700",children:(0,l.jsx)(v.Z,{className:"h-6 w-6 text-lime-600 dark:text-lime-100","aria-hidden":"true"})}):!1===e.success?(0,l.jsx)("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-rose-100 dark:bg-rose-700",children:(0,l.jsx)(b.Z,{className:"h-6 w-6 text-rose-600 dark:text-rose-100","aria-hidden":"true"})}):null,Z=function(e){var t;let n=window.matchMedia(e),[l,i]=(0,a.useState)(null!==(t=null==n?void 0:n.matches)&&void 0!==t&&t);return(0,a.useEffect)(()=>{if(null==n)return;let handleChange=e=>{i(e.matches)};return n.addEventListener("change",handleChange),()=>{n.removeEventListener("change",handleChange)}},[n]),l}("(min-width: 768px)"),T=null!==(t=e.buttons)&&void 0!==t?t:[];return(e.buttonLabel&&y&&T.push((0,l.jsx)(i.z,{variant:null!==(n=e.buttonVariant)&&void 0!==n?n:"info",onClick:y,children:e.buttonLabel})),e.secondButtonLabel&&C&&T.push((0,l.jsx)(i.z,{variant:null!==(s=e.secondButtonVariant)&&void 0!==s?s:"indeterminate",onClick:C,children:e.secondButtonLabel})),Z)?(0,l.jsxs)(r.Vq,{open:z,onOpenChange:e=>{e?O():S()},children:[e.children&&(0,l.jsx)(r.hg,{asChild:!0,children:e.children}),(0,l.jsxs)(r.cZ,{className:(0,g.dV)("screen"===e.wide?"max-w-screen-2xl":e.wide?"max-w-6xl":"max-w-[600px]","flex max-h-[90vh] flex-col"),noClose:e.noClose,children:[(0,l.jsxs)("div",{className:"flex flex-grow-0 items-center gap-4",children:[V,(0,l.jsxs)(r.fK,{className:"flex-1",children:[(0,l.jsxs)(r.$N,{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-1",children:e.title}),e.titleActions&&(0,l.jsx)("div",{className:"shrink-0",children:e.titleActions})]}),(0,l.jsx)(r.Be,{children:e.body})]})]}),(0,l.jsx)(w.i,{containerClassName:"flex-1 flex",className:"scrollable -mr-4 grid flex-1 gap-2 overflow-hidden overflow-y-scroll pr-1.5",children:e.content}),(0,l.jsxs)("div",{style:{direction:"rtl"},className:(0,g.dV)("grid flex-grow-0 grid-flow-col justify-end gap-2",T.length>1||"screen"===e.wide?"grid-cols-3 lg:grid-cols-4 xl:grid-cols-5":1===T.length?"grid-cols-2":"grid-cols-1"),children:[(0,l.jsx)(i.z,{variant:null!==(o=e.dismissVariant)&&void 0!==o?o:"outline",onClick:S,style:{direction:"revert"},children:null!==(d=e.dismissText)&&void 0!==d?d:"Cancel"}),T.map((e,t)=>(0,l.jsx)(ModalButton,{button:e,hide:S},t))]})]})]}):(0,l.jsxs)(Drawer,{open:z,onOpenChange:e=>{e?O():S()},children:[e.children&&(0,l.jsx)(c,{asChild:!0,children:e.children}),(0,l.jsxs)(x,{className:"flex max-h-[90vh] flex-col",children:[(0,l.jsxs)(DrawerHeader,{className:"flex flex-grow-0 items-center gap-4 text-left",children:[V,(0,l.jsxs)("div",{children:[(0,l.jsx)(f,{children:e.title}),(0,l.jsx)(h,{children:e.body})]})]}),e.content&&(0,l.jsx)("div",{className:"scrollable col-span-2 -mr-4 grid flex-1 gap-2 overflow-hidden overflow-y-scroll px-4 pb-2",children:e.content}),(0,l.jsxs)(DrawerFooter,{className:"flex-grow-0 pt-2",children:[T.map((e,t)=>(0,l.jsx)(ModalButton,{button:e,hide:S},t)),(0,l.jsx)(u,{asChild:!0,children:(0,l.jsx)(i.z,{variant:null!==(m=e.dismissVariant)&&void 0!==m?m:"outline",onClick:S,children:null!==(j=e.dismissText)&&void 0!==j?j:"Cancel"})})]})]})]})}},56445:function(e,t,n){"use strict";n.r(t),n.d(t,{NoSSR:function(){return NoSSR}});var l=n(72612),a=n(91302),i=n(39164),r=n(8832);let NoSSR=e=>{var t;let n=(0,a.O)();return n?(0,l.jsx)(s,{children:e.children}):null!==(t=e.fallback)&&void 0!==t?t:(0,l.jsx)(r.I,{})},s=(0,i.lazy)(()=>Promise.resolve({default:e=>(0,l.jsx)(l.Fragment,{children:e.children})}))},48789:function(e,t,n){"use strict";n.d(t,{l:function(){return ScrollContainer}});var l=n(72612),a=n(63278);let ScrollContainer=e=>(0,l.jsx)("div",{...e,className:(0,a.m6)("scrollable",e.className)})},57137:function(e,t,n){"use strict";n.d(t,{o:function(){return TextInput}});var l=n(72612),a=n(96148),i=n(6181),r=n(33964),s=n(53093),o=n(32836),c=n.n(o),d=n(39164),u=n(63278),m=n(69047);let TextInput=e=>{let t=(0,d.useRef)(c()(e)),{onChange:n}=e,[o,x]=(0,d.useState)(!1);(0,u.dV)("h-5 w-5",(e.error,"text-red-500"));let f=e.error?(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,l.jsx)(r,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})}):null,h=(0,u.dV)(e.error&&"border-red-300 text-red-900 placeholder-red-300 ring-red-500 dark:ring-red-500 dark:text-red-400 dark:placeholder-red-700"),p=e.error?(0,l.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",id:t.current+"-error",children:e.error}):null,v=e.help?(0,l.jsx)("p",{className:"mt-2 text-sm text-zinc-500",id:"email-description",children:e.help}):null,b=(0,d.useCallback)(t=>{null==n||n("number"===e.type?parseFloat(t.currentTarget.value):t.currentTarget.value)},[n,e.type]),g=(0,d.useCallback)(()=>{x(e=>!e)},[]),j="password"===e.type?(0,l.jsx)("div",{onClick:g,className:"absolute inset-y-0 ".concat(null!=f?"right-6":"right-0"," flex cursor-pointer items-center pr-3"),children:o?(0,l.jsx)(a,{className:"h-5 w-5 text-zinc-400"}):(0,l.jsx)(i,{className:"h-5 w-5 text-zinc-400"})}):null;return(0,l.jsxs)("div",{children:[(0,l.jsx)(s._,{className:"block text-sm font-semibold leading-6 text-zinc-700 dark:text-zinc-300",children:e.label}),(0,l.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,l.jsx)(m.I,{...e,type:o?"text":e.type,className:h,placeholder:e.placeholder,defaultValue:e.defaultValue,value:e.value,onChange:b,variant:e.error?"error":"default","aria-invalid":!!e.error,"aria-describedby":e.error?t.current+"-error":void 0}),f,j]}),null!=p?p:v]})}},64322:function(e,t,n){"use strict";n.d(t,{Z:function(){return Toggle}});var l=n(72612),a=n(3602);n(39164);var i=n(63278);let Toggle=e=>(0,l.jsxs)(a.r.Group,{as:"div",className:"flex items-center justify-between gap-x-2",children:[(0,l.jsxs)("span",{className:"flex flex-grow flex-col",children:[(0,l.jsx)(a.r.Label,{as:"span",className:(0,i.m6)("text-sm font-medium leading-6 text-zinc-700 dark:text-zinc-300",e.onLabel&&e.value&&"opacity-70",e.onLabel&&!e.value&&"text-brand-700 dark:text-brand-500"),passive:!0,children:e.label}),e.description&&(0,l.jsx)(a.r.Description,{as:"span",className:"text-sm text-zinc-500 dark:text-zinc-400",children:e.description})]}),(0,l.jsx)(a.r,{checked:e.value,onChange:e.onChange,className:(0,i.dV)(e.value&&null==e.onLabel?"bg-brand-600":"bg-zinc-200 dark:bg-zinc-950/50","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-400 focus:ring-offset-2 focus:ring-offset-zinc-900"),children:(0,l.jsx)("span",{"aria-hidden":"true",className:(0,i.dV)(e.value?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow-md shadow-black/20 ring-0 transition duration-200 ease-in-out dark:border-t dark:border-zinc-600 dark:bg-zinc-700 dark:shadow-black/100 ")})}),e.onLabel&&(0,l.jsx)("span",{className:"flex flex-grow flex-col",children:(0,l.jsx)(a.r.Label,{as:"span",className:(0,i.m6)("text-sm font-medium leading-6 text-zinc-700 dark:text-zinc-300",e.onLabel&&!e.value&&"opacity-70",e.onLabel&&e.value&&"text-brand-700 dark:text-brand-500"),passive:!0,children:e.onLabel})})]})},93095:function(e,t,n){"use strict";n.d(t,{d:function(){return l.d},z:function(){return l.z}});var l=n(94809);(0,n(64929).h)(l.z,"Button")},69047:function(e,t,n){"use strict";n.d(t,{I:function(){return c}});var l=n(72612),a=n(39164),i=n(64929),r=n(73918),s=n(63278);let o=(0,r.j)((0,s.dV)("flex w-full rounded-md border bg-transparent px-3 py-1.5 text-sm shadow-sm transition-colors","file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground","border-zinc-300 text-zinc-900 placeholder-zinc-300 ring-brand-600 dark:border-zinc-100/20 dark:text-zinc-100 dark:placeholder-zinc-100/30 dark:focus:ring-brand-400 ","focus:ring-offset-zinc-900 block w-full rounded-md border text-left shadow-sm ring-inset ring-offset-zinc-900 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2","active:translate-y-px active:scale-[99%] active:outline-none active:ring-2 active:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50"),{variants:{variant:{plain:"shadow-none bg-transparent text-zinc-700 dark:text-zinc-300 dark:bg-transparent",default:"dark:bg-zinc-800 bg-white",error:"border-red-300 text-red-900 placeholder-red-300 ring-red-500 dark:ring-red-500 dark:text-red-400 dark:placeholder-red-700"}},defaultVariants:{variant:"plain"}}),c=a.forwardRef((e,t)=>{let{className:n,type:a,...r}=e;return(0,l.jsx)("input",{type:a,className:(0,i.cn)(o(r),n),ref:t,...r})});(0,i.h)(c,"Input")},77579:function(e,t,n){"use strict";n.d(t,{j:function(){return WarningMessage}});var l=n(72612),a=n(33964);n(39164);var i=n(34471);let WarningMessage=e=>(0,l.jsx)(i.j,{color:"yellow",Icon:a,title:e.title?"Warning: "+e.title:"Warning",className:e.className,children:e.children})},64929:function(e,t,n){"use strict";n.d(t,{cn:function(){return cn},h:function(){return setDisplayName}});var l=n(35209),a=n(63278);function cn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,l.W)(t))}function setDisplayName(e,t){e.displayName=t}},91302:function(e,t,n){"use strict";n.d(t,{O:function(){return useIsClient}});var l=n(39164);let useIsClient=()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{t(!0)},[]),e}},66477:function(e,t,n){"use strict";n.d(t,{I:function(){return useDelayedChangeEffect},S:function(){return useChangeEffect}});var l=n(39164);let useChangeEffect=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[a,i]=(0,l.useState)(0),r=(0,l.useRef)([...e]);(0,l.useEffect)(()=>{let t=!1;r.current.forEach((n,l)=>{n!==e[l]&&(t=!0)}),t&&i(e=>n?e+1:1),r.current=[...e]},[...e]);let s=(0,l.useCallback)(()=>{i(0)},[]);return(0,l.useEffect)(()=>{if(null!=t&&a>0){let e=setTimeout(()=>{i(0)},t);return()=>{clearTimeout(e)}}},[t,a]),[a>0,s]},useDelayedChangeEffect=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],[i,r]=(0,l.useState)(0),s=(0,l.useRef)([...e]),o=(0,l.useRef)(null);(0,l.useEffect)(()=>{let n=!1;if(s.current.forEach((t,l)=>{t!==e[l]&&(n=!0)}),n){let trigger=()=>r(e=>a?e+1:1);o.current=window.setTimeout(()=>{trigger(),o.current=null},t)}s.current=[...e]},[...e]),(0,l.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]);let[c,d]=useChangeEffect([i],n,a);return[c,d]}}},function(e){e.O(0,[6545,966,8965,5360,3790,453,2705,3150,4535,2084,4595,6375,9321,8458,1744],function(){return e(e.s=40141)}),_N_E=e.O()}]);
//# sourceMappingURL=page-eed6097b52346c40.js.map